# 位运算

---

运算符：

| 运算符 | 含义     | 例子                  | 解释                          |
| ------ | -------- | --------------------- | ----------------------------- |
| `>>`   | 右移位   | `0011 => 0110`        | 二进制向右移动                |
| `<<`   | 左移位   | `0011 => 0110`        | 二进制向左移动                |
| `|`    | 或       | `0011 | 1011 => 1011` | 任何一位为 1 则为 1，否则为 0 |
| `&`    | 与       | `0011 & 1011 => 0011` | 全部为 1，则为 1， 否则为 0   |
| `~`    | 取反     | `0011 => 1100`        | 取反，1 的为 0，0 的为 1      |
| `^`    | 按位异或 | `0011 ^ 1011 => 1000` | 相同为 0 不同为 1             |

- << 左移
- `>>` 右移位
- ^ 异或
- & 与
- | 或

## XOR - 异或

异或： 相同为 0 不同为 1
异或的操作特点：

- `x ^ 0 = x`
- `x ^ 1s = ~x` // 1s 就是全 1 类似：1111 （3, 7, 15, 2^n-1）
- `x ^ (~x) = 1s`
- `x ^ x = 0`
- `c = a^b => a^c=b, b^c=a` // 交换两个数
- `a^b^c = a^(b^c) = (a^b)^c` // associative

## 常见操作

1. 将 x 最右边的 n 位清零：`x & (~0 << n)`
2. 获取 x 第 n 位的值，(0 or 1): `(x >> n) & 1`
3. 获取 x 第 n 位的幂值： `x & (1 << n)`
4. 仅将第 n 位置为 1 ：`x | (1<<n)`
5. 仅将第 n 位置为 0 ：`x &(~(1<<n))`
6. 将 x 最高位至第 n 位（含）清零：`x & ((1 << n)-1)`

## 实战位运算要点

- 判断奇偶：
  - `x % 2 == 1 --> (x&1) === 1`
  - `x % 2 == 0 --> (x&1) === 0`
  - 适用面：n 皇后，布隆过滤器
- 二分查找：`x >> 1 --> x/2`
  - 即： `x = x/2 --> x = x>>1`
  - `mid = (left+right) /2` --> `mid = (left+right) >> 1`
- `x = x & (x-1)` 清零最低位
- `x & -x` 得到最低位
- `x & ~x = 0`
